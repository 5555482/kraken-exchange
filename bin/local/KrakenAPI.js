// Generated by CoffeeScript 1.12.5
(function() {
  var API, APIVERSION, KrakenAPI, KrakenResponse, Path, Request, TIMEOUT, URL;

  Request = require('request-promise-native');

  Path = require('path');

  URL = require('url').URL;

  KrakenResponse = require('./KrakenResponse');

  API = 'https://api.kraken.com';

  APIVERSION = 0;

  TIMEOUT = 20000;

  KrakenAPI = (function() {
    function KrakenAPI(path, headers, form) {
      this.headers = headers != null ? headers : {};
      this.form = form;
      this.url = new URL(APIVERSION + "/" + path, API);
    }

    KrakenAPI.prototype.api = function() {
      this.headers['User-Agent'] = 'Kraken Exchange Node Client';
      return Request({
        method: 'POST',
        url: this.url,
        headers: this.headers,
        form: this.form,
        timeout: TIMEOUT
      }).then(function(response) {
        return new KrakenResponse(response);
      });
    };

    return KrakenAPI;

  })();

  module.exports = KrakenAPI;

}).call(this);
